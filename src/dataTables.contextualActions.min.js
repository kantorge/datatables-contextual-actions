jQuery.fn.dataTable.Api.register("contextualActions()",function(t){var e=this.table();if(null==t&&(t={}),(t=function t(e,...i){if(!i.length)return e;const n=i.shift();if(d(e)&&d(n))for(const i in n)d(n[i])?(e[i]||Object.assign(e,{[i]:{}}),t(e[i],n[i])):Object.assign(e,{[i]:n[i]});return t(e,...i)}({contextMenu:{enabled:!0,xoffset:-10,yoffset:-10,headerRenderer:function(){return""}},buttonList:{enabled:!0,groupClass:"btn-group",iconOnly:!1,disabledOpacity:.5,dividerSpacing:10},classes:[],iconPrefix:"",items:[],showSpeed:"0.30s",showConfirmationMethod:function(t){t.callback(window.confirm(t.message))}},t)).buttonList.enabled&&void 0===t.buttonList.containerSelector)throw"The buttonList.containerSelector option must be specified if the buttonList is enabled, to specify where the buttons will be created";var i={dt:null,table:null,contextMenuId:"",rightClickedRowData:"",init:function(t){this.dt=e,this.table=$(this.dt.container()).find("table"),$(window).click(function(){$("#"+i.contextMenuId).is(":visible")&&!$(event.target).closest(".dropdown-menu").length&&n()}),this.contextMenuId=(this.table instanceof jQuery?this.table.attr("id"):this.table.id)+"-context-menu",this.rightClickedRowData=null;var a=this;$(this.table).on("contextmenu","tr",function(e){var i=a.dt.row(this).data();if(t.contextMenu.enabled&&void 0!==i)return n(),a.rightClickedRowData=i,a.dt.row(this).select(),o(e.pageX,e.pageY),!1}),this.dt.on("select",function(e,i,n,o){if("row"===n){var l=i.rows({selected:!0}).toArray()[0],c=a.table.DataTable().rows(l).data().toArray();s(i,t,c)}}),this.dt.on("deselect",function(e,i,n,o){if("row"===n){var l=i.rows({selected:!0}).toArray()[0],c=a.table.DataTable().rows(l).data().toArray();s(i,t,c)}}),s(this.dt,t,[])},update:function(){var e=this.dt.rows({selected:!0}).data().toArray();s(this.dt,t,e)}};function n(){i.table.DataTable().rows().deselect(),$("#"+i.contextMenuId).removeClass("show").hide(),i.rightClickedRowData=null,a(i.contextMenuId)}function o(e,n){var o,s,l,d,r,u;o=i.contextMenuId,s=t.classes,l=t.iconPrefix,d=t.items,r=i.rightClickedRowData,(u=$('<div id="'+o+'" class="dropdown-menu shadow'+s.join(" ")+'">')).css({display:"block",visibility:"hidden",opacity:0,transform:"translateY(-30px)",transition:"0.15s ease all"}),u.append('<h6 class="dropdown-header"></h6>'),$.each(d,function(t,e){if("function"!=typeof e.isHidden||!e.isHidden(r))if("divider"===e.type)u.append('<div class="dropdown-divider"></div>');else if("option"===e.type){var n="";void 0!==e.iconClass&&""!==e.icon&&(n='<i style="margin-right:15px;" class="'+l+" "+e.iconClass+'"></i>');var s=void 0!==e.contextMenuClasses?e.contextMenuClasses.join(" "):"",d=void 0!==e.classes?e.classes.join(" "):"",f=e.title,p=$.parseHTML('<a class="dropdown-item '+d+" "+s+'" style="cursor: pointer;">'+n+f+"</a>");"function"==typeof e.isDisabled&&e.isDisabled(r)&&$(p).addClass("disabled").css("opacity","0.5"),void 0!==e.confirmation?$(p).click(function(){i.dt.rows().deselect(),a(o),c(e,[r],$(p))}):$(p).click(function(){i.dt.rows().deselect(),a(o),e.action([r],$(p))}),u.append(p)}}),$("body").append(u),$("#"+i.contextMenuId).css({top:n+t.contextMenu.yoffset,left:e+t.contextMenu.xoffset}),$("#"+i.contextMenuId).find(".dropdown-header").html(t.contextMenu.headerRenderer(i.rightClickedRowData)),setTimeout(function(){$("#"+i.contextMenuId).css({display:"block",visibility:"visible",opacity:1,transform:"translateY(0px)",transition:t.showSpeed+" ease all","z-index":99999})},1)}function s(t,e,n){e.buttonList.enabled&&function(t,e,n,o,s){l(t.containerSelector,e),function(t,e,n,o,s){var a='<div class="'+t.groupClass+'"></div>',l=[],d=null;$.each(n,function(e,n){if(null===d)d=$(a);else if(e>0&&"divider"===n.type)return l.push(d),void(d=$(a)).css("margin-left",t.dividerSpacing+"px");if(!("function"==typeof n.isHidden&&s.some(t=>n.isHidden(t))||"option"!==n.type&&"static"!==n.type)){var r="",u=t.iconOnly?"":"margin-right:10px;";void 0!==n.iconClass&&""!==n.icon&&(r='<i style="'+u+'" class="'+o+" "+n.iconClass+'"></i>');var f=void 0!==n.buttonClasses?n.buttonClasses.join(" "):"",p=void 0!==n.classes?n.classes.join(" "):"",b="";b=t.iconOnly?r:r+n.title;var h=void 0===n.multiTitle?n.title:s.length>1?n.multiTitle:n.title,v="function"==typeof n.isDisabled?s.filter(t=>!n.isDisabled(t)).length:s.length;t.iconOnly?(h=h,"static"!==n.type&&s.length>1&&(h+=" ("+v+")")):h="";var y=$.parseHTML('<button class="'+f+" "+p+'" data-original-title="'+h+'" >'+b+"</button>");void 0!==n.id&&$(y).attr("id",n.id);var w="static"!==n.type&&0===s.length||void 0!==n.multi&&!1===n.multi&&s.length>1||"function"==typeof n.isDisabled&&((void 0===n.isDisabledStrictMode||"boolean"==typeof n.isDisabledStrictMode&&!1===n.isDisabledStrictMode)&&0===s.filter(t=>!n.isDisabled(t)).length||"boolean"==typeof n.isDisabledStrictMode&&!0===n.isDisabledStrictMode&&s.some(t=>n.isDisabled(t)))||"static"===n.type&&"function"==typeof n.isDisabled&&n.isDisabled();w?($(y).addClass("disabled"),$(y).attr("disabled","disabled"),$(y).css("cursor","not-allowed"),$(y).css("opacity",t.disabledOpacity),$(y).removeAttr("title","")):!t.iconOnly&&"static"!==n.type&&s.length>1&&$(y).append(" ("+v+")"),!w&&t.iconOnly&&""!==h&&$(y).attr("data-toggle","tooltip"),"static"===n.type?$(y).click(function(){i.dt.rows().deselect(),n.action()}):"option"===n.type&&(void 0!==n.confirmation?$(y).click(function(){c(n,s)}):$(y).click(function(){i.dt.rows().deselect();var t=s.filter(t=>void 0===n.isDisabled||!n.isDisabled(t));n.action(t,$(y))})),d.append(y)}}),l.push(d),$.each(e,function(e,i){$(t.containerSelector).addClass(i)}),$.each(l,function(e,i){$(t.containerSelector).append(i)})}(t,e,n,o,s)}(e.buttonList,e.classes,e.items,e.iconPrefix,n)}function a(t){$("#"+t+".dropdown-menu").remove()}function l(e,i){$.each(i,function(e,i){$(t.containerSelector).removeClass(i)}),$(e).empty()}function c(e,n,o){var s=n.filter(t=>void 0===e.isDisabled||!e.isDisabled(t)),a=e.confirmation(s);a.callback=function(t){t&&(i.dt.rows().deselect(),e.action(s,o))},t.showConfirmationMethod(a)}function d(t){return t&&"object"==typeof t&&!Array.isArray(t)}return i.init(t),i});
